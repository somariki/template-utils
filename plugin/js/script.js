const{createApp,ref,reactive,watch,onMounted,onUnmounted,onBeforeUnmount,computed}=Vue,{useQuasar,copyToClipboard}=Quasar,uid="onecomme.plugin.template-utils",app=createApp({setup(){const e=ref(!1),a=reactive({title:"OneComme | Template Utils",baseURL:`${window.location.protocol}//${window.location.host}`,hostURL:["http://127.0.0.1:11180"],localURL:"http://localhost:11180",socketPort:11190,appVersion:"1.0.0",pluginVersion:"3.0.0",pluginAuthor:"Soma"}),t=ref([{label:"No Service",value:"service-id"}]),l=ref([]),o=reactive({codeRules:[e=>/^[a-zA-Z0-9-_]*$/.test(e)||"Only letters, numbers, and hyphens are allowed",e=>!!e||"This field is required"],codeMax:250,timeOpt:[{label:"Milliseconds",value:"ms"},{label:"Seconds",value:"s"}],timingOpt:[{label:"linear",value:"linear"},{label:"ease",value:"ease"},{label:"ease-in",value:"ease-in"},{label:"ease-out",value:"ease-out"}],columnOpt:[{label:"Column",value:"column"},{label:"Column reverse",value:"column-reverse"}],rateOpt:[{label:"10 Sec",value:10},{label:"20 Sec",value:20},{label:"30 Sec",value:30},{label:"60 Sec",value:60},{label:"120 Sec",value:120},{label:"300 Sec",value:300},{label:"600 Sec",value:600}],rowOpt:[{label:"Row",value:"row"},{label:"Row reverse",value:"row-reverse"}],flexDirectionOpt:[{label:"Column",value:"column"},{label:"Column reverse",value:"column-reverse"},{label:"Row",value:"row"},{label:"Row reverse",value:"row-reverse"}],transformTranslateOpt:[{label:"-100%",value:"-100%"},{label:"100%",value:"100%"}],radiusOpt:[{label:"PX",value:"px"},{label:"%",value:"%"}],borderOpt:[{label:"none",value:"none"},{label:"hidden",value:"hidden"},{label:"dotted",value:"dotted"},{label:"dashed",value:"dashed"},{label:"solid",value:"solid"},{label:"double",value:"double"},{label:"groove",value:"groove"},{label:"ridge",value:"ridge"},{label:"outset",value:"outset"},{label:"initial",value:"initial"},{label:"inherit",value:"inherit"}],fontOpt:[{label:"BIZ UDGothic",value:"BIZ UDGothic"},{label:"BIZ UDMincho",value:"BIZ UDMincho"},{label:"BIZ UDPGothic",value:"BIZ UDPGothic"},{label:"BIZ UDPMincho",value:"BIZ UDPMincho"},{label:"cwTeXKai",value:"cwTeXKai"},{label:"cwTeXFangSong",value:"cwTeXFangSong"},{label:"cwTeXYen",value:"cwTeXYen"},{label:"Dela Gothic One",value:"Dela Gothic One"},{label:"DotGothic16",value:"DotGothic16"},{label:"Hachi Maru Pop",value:"Hachi Maru Pop"},{label:"Hina Mincho",value:"Hina Mincho"},{label:"Kaisei Decol",value:"Kaisei Decol"},{label:"Kaisei HarunoUmi",value:"Kaisei HarunoUmi"},{label:"Kaisei Opti",value:"Kaisei Opti"},{label:"Kaisei Tokumin",value:"Kaisei Tokumin"},{label:"Kiwi Maru",value:"Kiwi Maru"},{label:"Klee One",value:"Klee One"},{label:"Kosugi",value:"Kosugi"},{label:"Kosugi Maru",value:"Kosugi Maru"},{label:"Long Cang",value:"Long Cang"},{label:"Liu Jian Mao Cao",value:"Liu Jian Mao Cao"},{label:"Ma Shan Zheng",value:"Ma Shan Zheng"},{label:"MiSans",value:"MiSans"},{label:"MiSansTC",value:"MiSansTC"},{label:"M PLUS 1",value:"M PLUS 1"},{label:"M PLUS 1 Code",value:"M PLUS 1 Code"},{label:"M PLUS 1p",value:"M PLUS 1p"},{label:"M PLUS 2",value:"M PLUS 2"},{label:"M PLUS Rounded 1c",value:"M PLUS Rounded 1c"},{label:"Mochiy Pop One",value:"Mochiy Pop One"},{label:"Mochiy Pop P One",value:"Mochiy Pop P One"},{label:"Murecho",value:"Murecho"},{label:"New Tegomin",value:"New Tegomin"},{label:"Noto Sans",value:"Noto Sans"},{label:"Noto Sans JP",value:"Noto Sans JP"},{label:"Noto Sans SC",value:"Noto Sans SC"},{label:"Noto Sans TC",value:"Noto Sans TC"},{label:"Noto Serif",value:"Noto Serif"},{label:"Noto Serif JP",value:"Noto Serif JP"},{label:"Noto Serif SC",value:"Noto Serif SC"},{label:"Noto Serif TC",value:"Noto Serif TC"},{label:"Potta One",value:"Potta One"},{label:"Rampart One",value:"Rampart One"},{label:"Reggae One",value:"Reggae One"},{label:"RocknRoll One",value:"RocknRoll One"},{label:"Sawarabi Gothic",value:"Sawarabi Gothic"},{label:"Sawarabi Mincho",value:"Sawarabi Mincho"},{label:"Shippori Antique",value:"Shippori Antique"},{label:"Shippori Antique B1",value:"Shippori Antique B1"},{label:"Shippori Mincho",value:"Shippori Mincho"},{label:"Shippori Mincho B1",value:"Shippori Mincho B1"},{label:"Stick",value:"Stick"},{label:"Train One",value:"Train One"},{label:"Yomogi",value:"Yomogi"},{label:"Yuji Boku",value:"Yuji Boku"},{label:"Yuji Mai",value:"Yuji Mai"},{label:"Yuji Syuku",value:"Yuji Syuku"},{label:"Yusei Magic",value:"Yusei Magic"},{label:"ZCOOL KuaiLe",value:"ZCOOL KuaiLe"},{label:"ZCOOL QingKe HuangYou",value:"ZCOOL QingKe HuangYou"},{label:"ZCOOL XiaoWei",value:"ZCOOL XiaoWei"},{label:"Zen Antique",value:"Zen Antique"},{label:"Zen Antique Soft",value:"Zen Antique Soft"},{label:"Zen Dots",value:"Zen Dots"},{label:"Zen Kurenaido",value:"Zen Kurenaido"},{label:"Zen Loop",value:"Zen Loop"},{label:"Zhi Mang Xing",value:"Zhi Mang Xing"}],fontStyle:[{label:"Normal",value:"normal"},{label:"Italic",value:"italic"}],fontType:[{label:"none",value:"None"},{label:"serif",value:"Serif"},{label:"sans-serif",value:"Sans-serif"},{label:"monospace",value:"Monospace"},{label:"vursive",value:"Cursive"},{label:"fantasy",value:"Fantasy"}],displayOpt:[{label:"None",value:"none"},{label:"Block",value:"block"},{label:"Flex",value:"flex"}],positionOpt:[{label:"Static",value:"static"},{label:"Relative",value:"relative"},{label:"Fixed",value:"fixed"},{label:"Absolute",value:"absolute"},{label:"Sticky",value:"sticky"}],edgeOpt:[{label:"Top",value:"top"},{label:"Bottom",value:"bottom"},{label:"Left",value:"left"},{label:"Right",value:"right"}],textAlign:[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"},{label:"Justify",value:"justify"}],justifyContent:[{label:"Start",value:"flex-start"},{label:"Center",value:"center"},{label:"End",value:"flex-end"}],justifyItems:[{label:"Start",value:"flex-start"},{label:"Center",value:"center"},{label:"End",value:"flex-end"}],alignContent:[{label:"Start",value:"flex-start"},{label:"Center",value:"center"},{label:"End",value:"flex-end"}],alignItems:[{label:"Start",value:"flex-start"},{label:"Center",value:"center"},{label:"End",value:"flex-end"}],sizeMax:100,marginMax:50,radiusMax:100,borderMax:10,paddingMax:50,weightMax:900,sizeMask:{0:"0",100:"100"},serviceOpt:t,dateFormat:[{value:1,label:"2025/06/09 (YYYY/MM/DD)"},{value:2,label:"2025/6/9 (YYYY/M/D)"},{value:3,label:"09/06/2025 (DD/MM/YYYY)"},{value:4,label:"9/6/2025 (M/D/YYYY)"},{value:5,label:"09/06/25 (DD/MM/YY)"},{value:6,label:"9/6/25 (D/M/YY)"},{value:7,label:"06/09 (MM/DD)"},{value:8,label:"6/9 (M/D)"},{value:9,label:"09/06 (D/M)"},{value:10,label:"9/6 (D/M)"},{value:11,label:"09/June (DD/MMMM)"},{value:12,label:"9/June (D/MMMM)"},{value:13,label:"09/Jun (DD/MMM)"},{value:14,label:"9/Jun (D/MMM)"},{value:15,label:"09 June 2025 (DD MMMM YYYY)"},{value:16,label:"9 June 2025 (D MMMM YYYY)"},{value:17,label:"09 Jun 2025 (DD MMM YYYY)"},{value:18,label:"9 Jun 2025 (D MMM YYYY)"},{value:19,label:"09 June (DD MMMM)"},{value:20,label:"9 June (DD MMMM)"},{value:21,label:"June/09 (MMMM/DD)"},{value:22,label:"June/9 (MMMM/D)"},{value:23,label:"Jun/09 (MMM/DD)"},{value:24,label:"Jun/9 (MMM/D)"},{value:25,label:"June 09 (MMMM/DD)"},{value:26,label:"Jun 9 (MMM/D)"},{value:27,label:"June 09 2025 (MMMM DD YYYY)"},{value:28,label:"Jun 9 2025 (MMM D YYYY)"},{value:29,label:"June-09 (MMMM-DD)"},{value:30,label:"June-9 (MMMM-D)"},{value:31,label:"Jun-09 (MMM-DD)"},{value:32,label:"Jun-9 (MMM-D)"},{value:33,label:"09-June (DD-MMMM)"},{value:34,label:"9-June (D-MMMM)"},{value:35,label:"09-Jun (DD-MMM)"},{value:36,label:"9-Jun (D-MMM)"},{value:37,label:"2025年06月09日 (YYYY年MM月DD日)-简体-繁體-日本語"},{value:38,label:"2025年6月9日 (YYYY年M月D日)-简体-繁體-日本語"},{value:39,label:"06月09日 (MM月DD日)-简体-繁體-日本語"},{value:40,label:"6月9日 (M月D日)-简体-繁體-日本語"},{value:41,label:"25年09月06日 (YY年MM月DD日)-简体-繁體-日本語"},{value:42,label:"25年6月9日 (YY年M月D日)-简体-繁體-日本語"},{value:43,label:"二〇二五年 六月 九日 (YYYY年 MMMM月 DD日)-简体-繁體"},{value:44,label:"二五年 六月 九日 (YY年 MM月 DD日)-简体-繁體"},{value:45,label:"六月 九日 (MMMM月DD日)-简体-繁體-日本語"},{value:46,label:"六月09日 (MMMM月DD日)-简体-繁體-日本語"},{value:47,label:"六月9日 (MMMM月D日)-简体-繁體-日本語"},{value:48,label:"水無月九日 (MMMM月DD日)-日本語"},{value:49,label:"水無月09日 (MMMM月DD日)-日本語"},{value:50,label:"水無月9日 (MMMM月D日)-日本語"},{value:51,label:"2025年水無月09日 (YYYY年 MMMM月 DD日)-日本語"},{value:52,label:"2025年水無月9日 (YYYY年 MMMM月 D日)-日本語"},{value:53,label:"25年水無月09日 (YY年 MMMM月 DD日)-日本語"},{value:54,label:"25年水無月9日 (YY年 MMMM月 D日)-日本語"},{value:55,label:"9 Jun (Fri) (D-MMM) W - English"},{value:56,label:"9 Jun (金) (D-MMM) W - 日本語"},{value:57,label:"9 Jun (五) (D-MMM) W - 简体-繁體"},{value:58,label:"9 Jun (週五) (D-MMM) W - 繁體"},{value:59,label:"9 Jun (周五) (D-MMM) W - 简体"},{value:60,label:"六月 9日 (金) (M月 D日) W - 日本語"},{value:61,label:"6月 9日 (金) (M月 D日) W - 日本語"},{value:62,label:"六月 9日 (五) (M月 D日) W - 简体-繁體"},{value:63,label:"6月 9日 (五) (M月 D日) W - 简体-繁體"},{value:64,label:"六月 9日 (週五) (M月 D日) W - 繁體"},{value:65,label:"6月 9日 (週五) (M月 D日) W - 繁體"},{value:66,label:"六月 9日 (周五) (M月 D日) W - 简体"},{value:67,label:"6月 9日 (周五) (M月 D日) W - 简体"},{value:68,label:"水無月 9日 (金) (M月 D日) W - 日本語"}],weekdayFormat:[{value:1,label:"Friday (dddd)"},{value:2,label:"Fri (ddd)"},{value:3,label:"金曜日 (dddd)"},{value:4,label:"金 (ddd)"},{value:5,label:"星期五 (dddd)"},{value:6,label:"周五 (ddd)"},{value:7,label:"週五 (ddd)"},{value:8,label:"五 (dd)"}],timeFormat:[{value:1,label:"13:05:05 (HH:mm:ss)"},{value:2,label:"13:5:5 (H:m:s)"},{value:3,label:"01:05:05 PM (hh:mm:ss A)"},{value:4,label:"1:5:5 PM (h:m:s A)"},{value:5,label:"01:05:05 pm (hh:mm a)"},{value:6,label:"1:5:5 pm (h:m a)"},{value:7,label:"13:05 (HH:mm)"},{value:8,label:"13:5 (H:m)"},{value:9,label:"01:05 PM (hh:mm A)"},{value:10,label:"1:5 PM (h:m A)"},{value:11,label:"01:05 pm (hh:mm a)"},{value:12,label:"1:5 pm (h:m a)"},{value:13,label:"01:05:05 午後 (hh:mm:ss A)"},{value:14,label:"1:5:5 午後 (h:m:s A)"},{value:15,label:"01:05 午後 (hh:mm A)"},{value:16,label:"1:5 午後 (h:m A)"},{value:17,label:"01:05:05 中午 (hh:mm a)"},{value:18,label:"1:5:5 中午 (h:m:s a)"},{value:19,label:"01:05 中午 (hh:mm a)"},{value:20,label:"1:5 中午 (h:m a)"},{value:21,label:"13時05分05秒 (HH時mm分ss秒)"},{value:22,label:"13時5分5秒 (HH時m分s秒)"},{value:23,label:"午後01時05分05秒 (A hh時mm分ss秒)"},{value:24,label:"午後1時5分5秒 (A h時m分s秒)"},{value:25,label:"午後01時05分 (A hh時mm分)"},{value:26,label:"午後1時5分 (A h時m分)"},{value:27,label:"下午01時05分 (A hh時mm分)"},{value:28,label:"下午1時5分 (A h時m分)"},{value:29,label:"下午01時05分05秒 (A hh時mm分ss秒)"},{value:30,label:"下午1時5分5秒 (A h時m分s秒)"}]}),s=reactive({defaultLanguage:"en-US"}),n=ref("en-US"),i=ref([{label:"Defualt",value:"en-US"}]),u=reactive({counter1:0,counter1Status:"true"==localStorage.getItem("counter-status1"),counter1Name:localStorage.getItem("counter-name1")?localStorage.getItem("counter-name1"):"",target1:localStorage.getItem("counter-target1")?Number(localStorage.getItem("counter-target1")):100,keyWords1:localStorage.getItem("counter-keywords1")?localStorage.getItem("counter-keywords1").split(","):[],counter2:0,counter2Status:"true"==localStorage.getItem("counter-status2"),counter2Name:localStorage.getItem("counter-name2")?localStorage.getItem("counter-name2"):"",target2:localStorage.getItem("counter-target2")?Number(localStorage.getItem("counter-target2")):100,keyWords2:localStorage.getItem("counter-keywords2")?localStorage.getItem("counter-keywords2").split(","):[],counter3:0,counter3Status:"true"==localStorage.getItem("counter-status3"),counter3Name:localStorage.getItem("counter-name3")?localStorage.getItem("counter-name3"):"",target3:localStorage.getItem("counter-target3")?Number(localStorage.getItem("counter-target3")):100,keyWords3:localStorage.getItem("counter-keywords3")?localStorage.getItem("counter-keywords3").split(","):[]}),r=computed({get:()=>u.keyWords1.join("\n"),set(e){u.keyWords1=e.split("\n").map((e=>e.trim())).filter((e=>""!==e));const a=K("onecomme-counter-field");-1!==a&&(I.data[a].value=u.keyWords1,localStorage.setItem("presetData",JSON.stringify(I))),localStorage.setItem("counter-keywords1",u.keyWords1.join(","))}}),c=computed({get:()=>u.keyWords2.join("\n"),set(e){u.keyWords2=e.split("\n").map((e=>e.trim())).filter((e=>""!==e));const a=K("onecomme-counter2-field");-1!==a&&(I.data[a].value=u.keyWords2,localStorage.setItem("presetData",JSON.stringify(I))),localStorage.setItem("counter-keywords2",u.keyWords2.join(","))}}),d=computed({get:()=>u.keyWords3.join("\n"),set(e){u.keyWords3=e.split("\n").map((e=>e.trim())).filter((e=>""!==e));const a=K("onecomme-counter3-field");-1!==a&&(I.data[a].value=u.keyWords3,localStorage.setItem("presetData",JSON.stringify(I))),localStorage.setItem("counter-keywords3",u.keyWords3.join(","))}}),g=ref("true"==localStorage.getItem("splitterMode")),v=reactive({mode:g.value,windowWidth:window.innerWidth,windowHeight:window.innerHeight,spViewWidth:`${window.innerWidth}px`,spViewHeight:`${window.innerHeight}px`,spHViewHeight:`${window.innerHeight}px`,spScrollHeight:`${window.innerHeight}px`,goodShowSize:600,splitterLimit:[25,75],splitterCur:Number(localStorage.getItem("splitterCur"))||50,reviewDefaultColor:localStorage.getItem("previewDefaultColor")||"#dadde1",colorFormat:"hexa|rgba",colorPalette:["#FFFFFF","#dadde1","#18A058","#2080F0","#F0A020","#D03050FF","#000000"],menu:!1,lg:[]}),p=()=>{v.windowWidth=window.innerWidth,v.windowHeight=window.innerHeight,g.value?(v.spViewWidth=window.innerWidth-15+"px",v.spViewHeight=`${m.value}px`,v.spScrollHeight=`${b.value}px`):(v.spViewWidth=`${m.value}px`,v.spViewHeight=window.innerHeight-20+"px",v.spScrollHeight=`${window.innerHeight}px`,v.spHViewHeight=`${window.innerHeight}px`)},m=computed((()=>v.mode?Math.round(v.windowHeight*(v.splitterCur/100)-20):Math.round(v.windowWidth*(v.splitterCur/100)-14))),b=computed((()=>Math.round(v.windowHeight*((100-v.splitterCur)/100)))),f=ref(JSON.parse(localStorage.getItem("selectedTemplateOption"))||null),h=ref([{id:"default",name:"Default",description:"Default",type:"Default",version:0,label:"Default",value:0,icon:"folder"}]),M=ref(JSON.parse(localStorage.getItem("selectedPresetOption"))||null),S=ref(""),$=ref([{presetId:0,templateId:"",name:"",code:"",isOriginal:!1,value:0,label:"",description:"",icon:"folder"}]),y=ref(localStorage.getItem("isPresetOption")||!1),D={templateId:"",status:!1,defaultEditTabs:localStorage.getItem("editTabCur")||"global",name:"",code:"",templateId:"",presetId:0,type:"",indexFile:"",assetFile:"",presetFile:"",cssFile:"",isOriginal:!1,position:0,section:[],part:[],attribute:[],data:[],language:[],description:[],configURL:"",internalURL:"",externalURL:[]},w={data:[]},I=reactive(JSON.parse(localStorage.getItem("presetData"))||{...D}),C=reactive(JSON.parse(localStorage.getItem("presetBeforeData"))||{...w}),x=async()=>{const e={id:f.value,transmit:"preset-get"};try{const t=await fetch(`${a.baseURL}/api/plugins/${uid}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),{response:l}=await t.json(),o=[];l.error||(l.forEach(((e,a)=>{if(e.presetId){const t=!0===e.isOriginal?"widgets":"tune";o.push({presetId:e.presetId,templateId:f.value,name:e.name,code:e.code,isOriginal:e.isOriginal,value:a+1,label:e.name,description:!0===e.isOriginal?"Original":"Custom",icon:t})}else y.value=!1,localStorage.removeItem("isPresetOption")})),o.length>0?($.value=o,y.value=!0,localStorage.setItem("isPresetOption",!0)):(y.value=!1,localStorage.removeItem("isPresetOption")))}catch(e){}},O=async()=>{if(null!=M.value){const e=M.value,t=$.value.find((a=>a.value===e));let l=null;if(t){const e={templateId:t.templateId,presetId:t.presetId,code:t.code,isOriginal:t.isOriginal,transmit:"preset-get-css"};try{const t=await fetch(`${a.baseURL}/api/plugins/${uid}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),{response:o}=await t.json();"object"==typeof o&&o.preset&&(l=o.preset)}catch(e){localStorage.removeItem("isPresetLoad"),Object.assign(I,D),Object.assign(C,D),localStorage.removeItem("presetData"),localStorage.removeItem("presetBeforeData")}}if(l){const e="templates",t=l.indexFile?l.indexFile:"index.html",o=`/${e}/${l.templateId}/${t}`,s=!1===l.isOriginal?1:0,n=`${a.baseURL}${o}?code=${l.code}&cus=${s}&preset=${l.presetId}`,i=`${a.localURL}${o}?code=${l.code}&cus=${s}&preset=${l.presetId}`,u=a.hostURL.map((e=>`${e}${o}?code=${l.code}&cus=${s}&preset=${l.presetId}`)),r=l.section||[];let c="global";if(!r.includes("global")&&Array.isArray(r)&&r.length>0){c=r.find((e=>0===e.position)).code||"global"}I.status=!0,I.defaultEditTabs=c,I.name=l.name||"",I.code=l.code||"",I.templateId=l.templateId||"",I.presetId=l.presetId||0,I.type=l.type||"",I.indexFile=t,I.assetFile=l.assetFile||"",I.presetFile=l.presetFile||"",I.cssFile=l.cssFile||"",I.isOriginal=l.isOriginal||!1,I.position=l.position||0,I.section=l.section||[],I.part=l.part||[],I.attribute=l.attribute||[],I.data=l.data||[],I.language=l.language||[],I.description=l.description||[],I.configURL=n,I.internalURL=i,I.externalURL=u,C.data=l.data||[],localStorage.setItem("editTabCur",c),localStorage.setItem("isPresetLoad",!0),localStorage.setItem("presetData",JSON.stringify(I)),localStorage.setItem("presetBeforeData",JSON.stringify(C))}else localStorage.removeItem("isPresetLoad"),Object.assign(I,D),Object.assign(C,w),localStorage.removeItem("presetData"),localStorage.removeItem("presetBeforeData")}},F=async()=>{try{const e=await fetch(`${a.baseURL}/api/plugins/${uid}?services=true`,{method:"GET"}),{response:t}=await e.json();if("object"==typeof t.data&&t.data.services){const e=[{label:"No Service",value:"service-id"},...(t.data.services||[]).map((e=>({label:e.name,value:e.id})))];l.value=e}}catch(e){}},k=ref(!1),Y={title:"title",prefix:null,content:"content",priBtnLabel:"OK",secBtnLabel:"Cancel",actionBtnLabel:"OK",isPriBtn:!1,isSecBtn:!1,isAction:!1},N=reactive({...Y}),L=ref(!1),P=useQuasar();let J;reactive({title:null,message:"Some important process  is in progress..."}),ref(!1);function T(){P.loadingBar.setDefaults({color:"teal"}),P.loadingBar.start()}function U(){P.loadingBar.setDefaults({color:"teal"}),P.loadingBar.stop()}function j(){P.loadingBar.setDefaults({color:"red"}),P.loadingBar.stop()}function W(e,a,t){P.notify({message:t,color:a,position:e})}P.loadingBar.setDefaults({color:"teal",size:"3px",position:"top"});const A=async(e,t,l)=>{const o={transmit:"update-ohayou-counter",flag:t?[t]:[],counter:e,current:u[`counter${l}`],target:u[`target${l}`]};try{const e=await fetch(`${a.baseURL}/api/plugins/${uid}`,{method:"PUT",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}),{response:t}=await e.json()}catch(e){}},B=async(e,t,l)=>{const o=!!t,s={transmit:"status-ohayou-counter",counter:e,target:Number(u[`target${l}`]),keyWords:u[`keyWords${l}`],status:o};try{const t=await fetch(`${a.baseURL}/api/plugins/${uid}`,{method:"PUT",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}),{response:n}=await t.json();if(n)return null!=l&&(u[`counter${l}Name`]=e,localStorage.setItem(`counter-name${l}`,e),u[`counter${l}Status`]=o,localStorage.setItem(`counter-status${l}`,o)),H.value||!0!==u.counter1Status&&!0!==u.counter2Status&&!0!==u.counter3Status||V(),!0}catch(e){}},H=ref(null),V=()=>{const e=window.location.hostname+`:${a.socketPort}`;let t="counter";!0===u.counter1Status&&(t+=",counter1"),!0===u.counter2Status&&(t+=",counter2"),!0===u.counter3Status&&(t+=",counter3");const l=`${window.location.protocol}//${e}/utils?p=${t}`;H.value=new WebSocket(l),H.value.onopen=()=>{},H.value.onmessage=e=>{const a=JSON.parse(e.data),t=Number(u.counter1),l=Number(u.counter2),o=Number(u.counter3);"ping"===a?.type?(u.counter1Status&&(u.counter1=0==t?a?.data?.counter1||0:t),u.counter2Status&&(u.counter2=0==l?a?.data?.counter2||0:l),u.counter3Status&&(u.counter3=0==o?a?.data?.counter3||0:o)):"update"===a?.type&&(u.counter1Status&&(u.counter1=a?.data?.counter1||0),u.counter2Status&&(u.counter2=a?.data?.counter2||0),u.counter3Status&&(u.counter3=a?.data?.counter3||0))},H.value.onerror=e=>{},H.value.onclose=()=>{}},R=async e=>{if(!(I.name?I.name.trim():""))return void W("top","red",v.lg.message.invalidPresetName);let t={};if("update"===e)t={transmit:"save-preset",prefix:"update-preset",name:I.name||"",code:I.code||"",type:I.type||"",isOriginal:!1,indexFile:I.indexFile||"",assetFile:I.assetFile||"",presetFile:I.presetFile||"",cssFile:I.cssFile||"",presetId:Number(I.presetId),position:I.position||0,templateId:f.value||"",data:I.data||[]};else{if("confirm"===e)return L.value=!1,N.prefix="save-another-preset",N.title=v.lg.title.newPresetName,N.isSecBtn=!0,N.isAction=!0,N.actionBtnLabel=v.lg.button.createNew,N.secBtnLabel=v.lg.button.cancel,void(k.value=!0);if("create"===e){if(!S.value)return void W("top","red",v.lg.message.invalidPresetName);t={transmit:"save-preset",prefix:"create-preset",name:S.value||"",code:I.code||"",type:I.type||"",isOriginal:!1,indexFile:I.indexFile||"",assetFile:I.assetFile||"",presetFile:I.presetFile||"",cssFile:I.cssFile||"",templateId:f.value||"",data:I.data||[]}}}try{T();const e=await fetch(`${a.baseURL}/api/plugins/${uid}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),{response:l}=await e.json();if(l.status){await x();const e=l.presetId||0,a=l.templateId||"",t=l.code||"",o=l.isOriginal||!1,s=$.value.find((l=>l.presetId===e&&l.templateId===a&&l.code===t&&l.isOriginal===o));s&&(localStorage.setItem("selectedPresetOption",JSON.stringify(s.value)),M.value=s.value,await O()),U(),W("bottom","teal",v.lg.message.presetSaveSuccess)}else j(),W("bottom","red",v.lg.message.presetSaveFail)}catch(e){j(),W("bottom","red",v.lg.message.presetSaveFail)}},E=async e=>{if("confirm"===e)return L.value=!1,N.prefix="delete-preset",N.title=v.lg.title.deleteNotice,N.content=`[ ${I.name} ] ${v.lg.content.delete1}`,N.isAction=!0,N.actionBtnLabel=v.lg.button.delete,N.isSecBtn=!0,N.secBtnLabel=v.lg.button.cancel,void(k.value=!0);const t={transmit:"delete-preset",code:I.code||"",isOriginal:!1,presetId:I.presetId||0,templateId:f.value||""};try{T();const e=await fetch(`${a.baseURL}/api/plugins/${uid}`,{method:"DELETE",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!e.ok)throw j(),W("top","red",v.lg.message.failDelete),new Error(`Error: ${e.statusText}`);const{response:l}=await e.json();Object.assign(I,D),I.status=!1,I.defaultEditTabs="global",M.value=null,localStorage.removeItem("presetData"),localStorage.removeItem("presetBeforeData"),localStorage.removeItem("editTabCur"),localStorage.removeItem("isPresetLoad"),localStorage.removeItem("selectedPresetOption"),await x(),U(),W("top","teal",v.lg.message.successDelete)}catch(e){j(),W("top","red",v.lg.message.failDelete)}},z=async e=>{if("confirm"===e)return k.value=!0,L.value=!1,N.prefix="change-language",N.title=v.lg.title.changeLanguage,N.isAction=!0,N.actionBtnLabel=v.lg.button.change,N.isSecBtn=!0,void(N.secBtnLabel=v.lg.button.cancel);const t={lang:n.value,transmit:"change-language"};try{T();const e=await fetch(`${a.baseURL}/api/plugins/${uid}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),{response:l}=await e.json();l?(v.lg=l.package,s.defaultLanguage=n.value,M&&O(),U(),W("bottom","teal",v.lg.message.successChange)):(j(),W("bottom","red",v.lg.message.failChange))}catch(e){j(),W("top","red",v.lg.message.failChange)}},K=e=>I.data.findIndex((a=>a.code===e)),Z=(e,a)=>a&&a.length>0?a.findIndex((a=>a.code===e)):I.attibute.findIndex((a=>a.code===e));watch((()=>v.mode),((e,a)=>{localStorage.setItem("splitterMode",e),g.value=e||!1,p()})),watch((()=>v.splitterCur),((e,a)=>{localStorage.setItem("splitterCur",e);m.value;g.value?(v.spViewWidth=window.innerWidth-15+"px",v.spViewHeight=`${m.value}px`,v.spScrollHeight=`${b.value}px`):(v.spViewWidth=`${m.value}px`,v.spViewHeight=window.innerHeight-20+"px",v.spScrollHeight=`${window.innerHeight}px`,v.spHViewHeight=`${window.innerHeight}px`)})),watch((()=>v.reviewDefaultColor),((e,a)=>{localStorage.setItem("previewDefaultColor",e)})),watch(f,(e=>{e&&(localStorage.removeItem("isPresetLoad"),Object.assign(I,D),Object.assign(C,w),localStorage.removeItem("presetData"),localStorage.removeItem("presetBeforeData"),localStorage.removeItem("fastRender"),M.value=null,localStorage.removeItem("selectedPresetOption"),localStorage.setItem("selectedTemplateOption",JSON.stringify(e)),x())})),watch(M,(e=>{e&&(localStorage.setItem("selectedPresetOption",JSON.stringify(e)),O())})),watch(I,((e,a)=>{!0===e.status?(localStorage.setItem("editTabCur",e.defaultEditTabs),localStorage.setItem("presetData",JSON.stringify(e)),function(){const e=I.attribute||[],a=I.data||[];let t=[];if(e.length>0&&a.length>0){e.forEach((e=>{const l=Z(e.code,a),o=!!e?.isSetCustom,s=!!a[l]?.isCustom,n=o===s,i=!!e?.isOriginal;let r="",c=-1;i&&(r=e?.oriFrom?e.oriFrom:"",c=Z(r,a));const d=!(!i||!o||s||-1===c);if(-1!==l)switch(e.attribute){case"time":{const o=a[l].value||0,i=a[l].unit||"px",u=d?a[c].value||0:"",r=d?a[c].unit||"px":"",g=`${o}${i}`,v=d?`${u}${r}`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?g:v,isCustom:s,data:{value:n?o:u,unit:n?i:r}});break}case"size":case"degree":{const o=a[l].value||0,i=a[l].unit||"px",u=d?a[c].value||0:"",r=d?a[c].unit||"px":"",g=`${o}${i}`,v=d?`${u}${r}`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?g:v,isCustom:s,data:{value:n?o:u,unit:n?i:r}});break}case"size-condition":{const o=a[l].value||0,i=a[l].unit||"px",u=a[l].isDefault||!1,r=a[l].defaultValue||"none",g=d?a[c].value||0:"",v=d?a[c].unit||"px":"",p=d&&a[c].isDefault||!1,m=d?a[c].defaultValue||"none":"",b=u?r:`${o}${i}`,f=d?p?m:`${g}${v}`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?b:f,isCustom:s,data:{value:n?o:g,unit:n?i:v}});break}case"size-range-condition":{const o=a[l].value||0,i=a[l].range||{min:0,max:0},u=a[l].unit||"px",r=a[l].isDefault||!1,g=a[l].isDefaultMin||!1,v=a[l].isDefaultMax||!1,p=!(!r||g),m=!(!r||v),b=a[l].defaultValue||"none",f=a[l].defaultValueMin||"none",h=a[l].defaultValueMax||"none",M=d?a[c].value||0:"",S=d&&a[c].range||{min:0,max:0},$=d?a[c].unit||"px":"",y=d&&a[c].isDefault||!1,D=d&&a[c].isDefaultMin||!1,w=d&&a[c].isDefaultMax||!1,I=!(!y||D),C=!(!y||w),x=d&&a[c].defaultValue||"none",O=d&&a[c]?.range?.min||"none",F=d&&a[c]?.range?.max||"none",k=y?x:`${M}${$}`,Y=I?`${S.min}${$}`:O,N=C?`${S.max}${$}`:F,L=r?b:`${o}${u}`,P=d?k:"",J=p?`${i.min}${u}`:f,T=d?Y:"",U=m?`${i.max}${u}`:h,j=d?N:"";t.push({code:e.code,flag:e.flag,cssvar:`--${e.code}`,value:n?L:P,isCustom:s,data:{isDefault:n?r:y,defaultValue:n?b:x,value:n?o:M,unit:n?u:$}}),t.push({code:e.code,flag:e.flag,cssvar:`--${e.code}-min`,value:n?J:T,isCustom:s,data:{isDefault:n?g:D,defaultValue:n?f:O,value:n?i.min:S.min,unit:n?u:$}}),t.push({code:e.code,flag:e.flag,cssvar:`--${e.code}-max`,value:n?U:j,isCustom:s,data:{isDefault:n?v:w,defaultValue:n?h:F,value:n?i.max:S.max,unit:n?u:$}});break}case"number":case"double":{const o=a[l].value||0,i=d?a[c].value||0:"",u=d?i:o,r=d?i:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?u:r,isCustom:s,data:{value:n?u:r}});break}case"radius":{const o=a[l].value||[0,0,0,0],i=a[l].unit||"px",u=d?a[c].value:"",r=d?a[c].unit||"px":"",g=Array.isArray(o)?o.map((e=>`${e}${i}`)).join(" "):`${o}${i}`,v=d?Array.isArray(u)?u.map((e=>`${e}${r}`)).join(" "):`${u}${r}`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?g:v,isCustom:s,data:{value:n?o:u,unit:n?i:r}});break}case"margin":case"padding":{const o=a[l].value||[0,0,0,0],i=a[l].unit||"px",u=d?a[c].value:"",r=d?a[c].unit||"px":"",g=Array.isArray(o)?o.map((e=>`${e}${i}`)).join(" "):`${o}${i}`,v=d?Array.isArray(u)?u.map((e=>`${e}${r}`)).join(" "):`${u}${r}`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?g:v,isCustom:s,data:{value:n?o:u,unit:n?i:r}});break}case"border":case"border-top":case"border-right":case"border-bottom":{const o=a[l].value||0,i=a[l].unit||"px",u=a[l].style||"none",r=a[l].color||"#FFFFFF",g=d?a[c].value:"",v=d?a[c].unit||"px":"",p=d?a[c].style||"none":"",m=d?a[c].color||"#FFFFFF":"";let b=`${o}${i} ${u} ${r}`,f=`${g}${v} ${p} ${m}`;"none"===u&&(b="none"),"none"===p&&(f="none"),t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?b:f,isCustom:s,data:{value:n?o:g,unit:n?i:v,style:n?u:p,color:n?r:m}});break}case"font":{const o=e.flag,i=!!o.isVisible,u={isVisible:i,isCss:!!o.isCss},r={isVisible:i,isJs:!!o.isJs};let g="",v="",p=0,m=0,b="",f="",h="",M="",S="",$="",y=0,D=0,w="",I="";if(e.cssvarColor){g=a[l].color||"#FFFFFF",v=d?a[c].color||"#FFFFFF":"";const o=`${g}`,i=d?v:"";t.push({code:e.code,flag:u,cssvar:e.cssvarColor,value:n?o:i,isCustom:s})}if(e.cssvarSize){p=a[l].size||0,b=a[l].unit||"px",m=d&&a[c].size||0,f=d&&a[c].unit||"";const o=`${p}${b}`,i=d?`${m}${f}`:"";t.push({code:e.code,flag:u,cssvar:e.cssvarSize,value:n?o:i,isCustom:s})}if(e.cssvarFont){h=a[l].font||"",M=d&&a[c].font||"",S=a[l].type||"",$=d&&a[c].type||"";const o=`${h}`||"",i=d?`${M}`:"",r=d?`${$}`:`${S}`||"None",g=d?`${$}`:"None";let v=o,p=i;"None"!==r&&(v=`${o}, ${r.toLowerCase()}`,p=`${i}, ${g.toLowerCase()}`),t.push({code:e.code,flag:u,cssvar:e.cssvarFont,value:n?v:p,isCustom:s})}if(e.cssvarWeight){y=a[l].weight||0,D=d&&a[c].weight||0;const o=y?`${y}`:"",i=d&&`${D}`||"";t.push({code:e.code,flag:u,cssvar:e.cssvarWeight,value:n?o:i,isCustom:s})}if(e.cssvarStyle){w=a[l].style||"",I=d&&a[c].style||"";const o=w?`${w}`:"",i=d?`${I}`:"";t.push({code:e.code,flag:u,cssvar:e.cssvarStyle,value:n?o:i,isCustom:s})}const C=n?v:g,x=n?M:h,O=n?$:S,F=n?m:p,k=n?f:b,Y=n?D:y,N=n?I:w;t.push({code:e.code,flag:r,cssvar:"",value:"",isCustom:s,data:{color:C,font:x,type:O,size:F,unit:k,weight:Y,style:N}});break}case"edge":{const o=a[l].edge,i=a[l].unit,u=a[l].value||0,r=d?a[c].edge:"",g=d?a[c].unit:"",v=d&&a[c].value||0,p=`${u}${i}`,m=v?`${v}${g}`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?p:m,isCustom:s,data:{value:n?u:v,edge:n?o:r,unit:n?i:g}});break}case"image":{const o=a[l].value||"",i=d&&a[c].value||"",u=`url('${o}')`||"",r=d?`url('${i}')`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?u:r,isCustom:s,data:{value:n?o:i}});break}case"content":{const o=a[l].value||"",i=d&&a[c].value||"",u=`'${o}'`||"",r=d?`'${i}'`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?u:r,isCustom:s,data:{value:n?u:r}});break}case"text-shadow":{const o=a[l].horizontal||0,i=a[l].vertical||0,u=a[l].blur||0,r=a[l].color||"#FFFFFF",g=a[l].unit||"px",v=a[l].isEffect||!1,p=d&&a[c].horizontal||0,m=d&&a[c].vertical||0,b=d&&a[c].blur||0,f=d?a[c].color||"":"#FFFFFF",h=d&&a[c].unit||"px",M=d&&a[c].isEffect||!1,S=!0===(d?M:v)?`${d?`${p}${h}`:`${o}${g}`} ${d?`${m}${h}`:`${i}${g}`} ${d?`${b}${h}`:`${u}${g}`} ${d?f:r}`:"none",$=n?o:p,y=n?i:m,D=n?u:b,w=n?r:f,I=n?g:h,C=n?v:M;t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n||d?S:"",isCustom:s,data:{horizontal:$,vertical:y,blur:D,color:w,unit:I,isEffect:C}});break}case"box-shadow":{const o=a[l].horizontal||0,i=a[l].vertical||0,u=a[l].blur||0,r=a[l].spread||0,g=a[l].color||"#000000",v=a[l].unit||"px",p=a[l].inset||!1,m=a[l].isEffect||!1,b=d&&a[c].horizontal||0,f=d&&a[c].vertical||0,h=d&&a[c].blur||0,M=d&&a[c].spread||0,S=d&&a[c].color||"#000000",$=d&&a[c].unit||"px",y=d&&a[c].inset||!1,D=d&&a[c].isEffect||!1,w=`${d?`${b}${$}`:`${o}${v}`} ${d?`${f}${$}`:`${i}${v}`} ${d?`${h}${$}`:`${u}${v}`} ${d?`${M}${$}`:`${r}${v}`} ${d?S:g}`,I=(d?D:m)?(d?y:p)?`${w} inset`:w:"none",C=n?o:b,x=n?i:f,O=n?u:h,F=n?r:M,k=n?g:S,Y=n?v:$,N=n?y:p,L=n?D:m;t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n||d?I:"",isCustom:s,data:{horizontal:C,vertical:x,blur:O,spread:F,color:k,isInset:N,isEffect:L,unit:Y}});break}case"boolean-multoggle":{const o=d?a[c].toggle||[]:a[l].toggle||[];e.toggle.forEach((a=>{const l=o.find((e=>e.code===a.code)).value?a.truevalue:a.falsevalue;t.push({code:a.code,flag:e.flag,cssvar:a.cssvar,value:n||i?l:"",isCustom:s,data:{value:n||i?l:""}})}));break}case"button-toggle":{const o=e.togleOptions,u=d?a[c].value||"":a[l].value||"",r=e.truedefine,g=e.falsedefine;o.forEach((a=>{const l=a.value===u?r:g;t.push({code:a.code,flag:e.flag,cssvar:a.cssvar,value:n||i?l:"",isCustom:s,data:{value:n||i?l:""}})}));break}case"button-toggle-2":{const o=e.togleOptions,u=d?a[c].value||"":a[l].value||"";o.forEach((a=>{a.value===u&&a.paramSet.forEach((a=>{t.push({code:a.code,flag:e.flag,cssvar:`--${a.code}`,value:n||i?a.value:"",isCustom:s,data:{value:n||i?a.value:""}})}))}));break}case"linear-gradient":{const o=a[l].gradients.map((e=>`linear-gradient(${e.degree}${e.unit}, ${e.color1}, ${e.color2})`)).join(","),i=d?a[c].gradients.map((e=>`linear-gradient(${e.degree}${e.unit}, ${e.color1}, ${e.color2})`)).join(","):"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?o:i,isCustom:s,data:{value:n?o:i}});break}case"linear-gradient-2":{const o=a[l].gradients.map((e=>`${e.color} ${e.stop}${e.unit}`)).join(","),i=`linear-gradient(${a[l].degree}${e.degreeUnit}, ${o})`,u=d?a[l].gradients.map((e=>`${e.color} ${e.stop}${e.unit}`)).join(","):"",r=d?`linear-gradient(${a[l].degree}${e.degreeUnit}, ${u})`:"";t.push({code:e.code,flag:e.flag,cssvar:e.cssvar,value:n?i:r,isCustom:s,data:{value:n?i:r}});break}case"onecomme-counter-current":t.push({code:e.code,flag:e.flag,cssvar:"",value:"",data:{counterIndex:Number(e.counterIndex)||0,counterName:e.counterName,counterType:e.counterType}});break;case"onecomme-counter-field":if(e.counterIndex){const t=e.counterIndex,o=a[l].value||[],s=u[`keyWords${t}`]||[];Array.isArray(o)&&Array.isArray(s)&&o.length===s.length&&o.every(((e,a)=>e===s[a]))||(u[`keyWords${t}`]=a[l].value||[],localStorage.setItem(`counter-keywords${t}`,u[`keyWords${t}`].join(",")))}break;case"datetime-date-format":case"datetime-weekday-format":case"datetime-time-format":t.push({code:e.code,flag:e.flag,cssvar:"",value:0,data:{value:Number(a[l].value)||1}});break;default:const o=a[l].value||"",i=d&&a[c].value||"";t.push({code:a[l].code,flag:e.flag,cssvar:e.cssvar,value:n?o:i,data:{value:n?o:i}})}}));let l={templateId:I.templateId||"",presetId:I.presetId||"",isOriginal:I.isOriginal||!1,cssData:t};localStorage.setItem("fastRender",JSON.stringify(l))}else localStorage.removeItem("fastRender")}()):(localStorage.removeItem("isPresetLoad"),localStorage.removeItem("presetData"),localStorage.removeItem("presetBeforeData"),Object.assign(I,D),Object.assign(C,w),localStorage.removeItem("fastRender"))})),watch(k,(e=>{!1===e&&Object.assign(N,Y)})),watch(L,(e=>{if(!0===e){if("change-language"===N.prefix&&z("save"),"save-another-preset"===N.prefix){if(!S.value)return W("top","red",v.lg.message.invalidPresetName),void(L.value=!1);R("create")}"delete-preset"===N.prefix&&E("delete"),k.value=!1,L.value=!1}}));return onBeforeUnmount((()=>{void 0!==J&&(clearTimeout(J),P.loading.hide())})),onMounted((()=>{window.addEventListener("resize",p),p(),(async()=>{try{const t=await fetch(`${a.baseURL}/api/plugins/${uid}?lang=true&setting=true&host=true&port=true&plugin=true&template=true`,{method:"GET"}),{response:r}=await t.json(),c=r.data.port||11190;c!==a.socketPort&&(a.socketPort=c);const d=r.data.languageOption.map((e=>({label:e.name,value:e.lang}))),g=r.data.host.map((e=>`http://${e}:11180`)),p=r.data.templateOption.map((e=>({id:e.id,name:e.name,description:`${e.type} - ver.${e.version}`,type:e.type,version:e.version,label:e.name,value:e.id,icon:"folder"})));v.lg=r.data.uipackage,n.value=r.data.setting.defaultLanguage,s.defaultLanguage=r.data.setting.defaultLanguage,i.value=d,a.hostURL=g,a.pluginVersion=r.data.pluginVersion,a.pluginAuthor=r.data.pluginAuthor,a.appVersion=r.data.appInfo.version,h.value=p,e.value=!0,document.body.removeAttribute("hidden"),f.value&&await x(),M.value&&I.presetId&&y&&await O(),await F(),o.serviceOpt=l.value,!0===u.counter1Status&&await B(u.counter1Name,!0,1),!0===u.counter2Status&&await B(u.counter2Name,!0,2),!0===u.counter3Status&&await B(u.counter3Name,!0,3)}catch(e){}})()})),onUnmounted((()=>{window.removeEventListener("resize",p)})),{loaded:e,web:a,setting:s,selectedLangOption:n,langOption:i,ui:v,lang:e=>{const a=s.defaultLanguage,t=I.language.find((a=>a.code===e));return t&&t[a]&&t[a]||e},tips:e=>{const a=s.defaultLanguage,t=I.description.find((a=>a.code===e));return t&&t[a]?t[a]||"":e},dtExIndex:e=>{let a=I.data.findIndex((a=>a.code===e));if(-1===a){let t={};const l=I.attribute.find((a=>a.code===e));switch(l.attribute){case"time":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||0,t.unit=l.unit||"s",I.data.push(t);break;case"timing-function":case"flex-column":case"flex-row":case"flex-direction":case"transform-translate":case"color":case"text-align":case"justify-content":case"justify-items":case"align-content":case"align-items":case"display":case"position":case"image":case"content":case"button-toggle":case"button-toggle-2":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||"",I.data.push(t);break;case"size":case"degree":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||0,t.unit=l.unit||"deg",I.data.push(t);break;case"size-condition":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||0,t.isDefault=l.isDefault||!1,t.defaultValue=l.defaultValue||"none",t.unit=l.unit||"px",I.data.push(t);break;case"size-range-condition":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||0,t.range=l.range||{min:0,max:0},t.isDefault=l.isDefault||!1,t.isDefaultMin=l.isDefaultMin||!1,t.isDefaultMax=l.isDefaultMax||!1,t.defaultValue=l.defaultValue||"none",t.defaultValueMin=l.defaultValueMin||"none",t.defaultValueMax=l.defaultValueMax||"none",t.unit=l.unit||"px",I.data.push(t);break;case"number":case"double":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=Number(l.value)||0,I.data.push(t);break;case"radius":case"margin":case"padding":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||[0,0,0,0],t.unit=l.unit||"px",I.data.push(t);break;case"border":case"border-top":case"border-right":case"border-bottom":case"border-left":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||0,t.style=style||"none",t.color=color||"#FFFFFF",t.unit=unit||"px",I.data.push(t);break;case"font":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.color||"#FFFFFF",t.font=l.font||"",t.style=l.style||"normal",t.type=l.type||"",t.size=l.size||16,t.unit=l.unit||"px",t.weight=l.weight||"500",I.data.push(t);break;case"font-weight":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||"500",I.data.push(t);break;case"edge":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||0,t.edge=l.edge,t.unit=l.unit||"px",I.data.push(t);break;case"text-shadow":t.isCustom=l.isCustom||!1,t.code=l.code,t.isEffect=l.isEffect||!1,t.horizontal=l.horizontal||0,t.vertical=l.vertical||0,t.blur=l.blur||0,t.unit=l.unit||"px",t.color=l.color||"#000000",I.data.push(t);break;case"box-shadow":t.isCustom=l.isCustom||!1,t.code=l.code,t.isEffect=l.isEffect||!1,t.horizontal=l.horizontal||0,t.vertical=l.vertical||0,t.blur=l.blur||0,t.spread=l.spread||0,t.inset=l.inset||!1,t.unit=l.unit||"px",t.color=l.color||"#000000",I.data.push(t);break;case"boolean-multoggle":t.isCustom=l.isCustom||!1,t.code=l.code,t.toggle=l.toggle||[],I.data.push(t);break;case"linear-gradient":t.isCustom=l.isCustom||!1,t.code=l.code,t.gradients=l.gradients||[],I.data.push(t);break;case"linear-gradient-2":t.isCustom=l.isCustom||!1,t.code=l.code,t.gradients=l.gradients||[],t.degree=l.degree||0,I.data.push(t);break;case"onecomme-services":t.isCustom=l.isCustom||!1,t.code=l.code,t.value=l.value||"service-id",I.data.push(t)}a=K(e)}return a},selectedTemplateOption:f,templateOption:h,isPresetOption:y,presetData:I,selectedPresetOption:M,presetOption:$,isModal:k,modalDialog:N,modalConfirmation:L,changeLanguage:z,copyText:async e=>{try{await copyToClipboard(e),P.notify({message:v.lg.message.copyLinkSuccess,color:"green",position:"top"})}catch(e){P.notify({message:v.lg.message.copyLinkFail,color:"red",position:"top"})}},savePreset:R,presetNewName:S,deletePreset:E,reset:async()=>{O()?W("top","teal",v.lg.message.resetSuccess):W("top","red",v.lg.message.resetFail)},undo:e=>{const a=JSON.parse(localStorage.getItem("presetBeforeData"))||{};if(a&&"object"==typeof a.data&&Object.keys(a.data).length>0){const t=a.data.find((a=>a.code===e)),l=K(e),o=I.attribute.find((a=>a.code===e));t.code===e&&(null!==t.color&&(I.data[l].color=t.color),null!==t.size&&(I.data[l].size=t.size),null!==t.font&&(I.data[l].font=t.font),null!==t.weight&&(I.data[l].weight=t.weight),null!==t.type&&(I.data[l].type=t.type),null!==t.style&&(I.data[l].style=t.style),null!==t.value&&(I.data[l].value=t.value),null!==t.valueMin&&(I.data[l].valueMin=t.valueMin),null!==t.valueMax&&(I.data[l].valueMax=t.valueMax),null!==t.unit&&(I.data[l].unit=t.unit),null!==t.edge&&(I.data[l].edge=t.edge),null!==t.isEffect&&(I.data[l].isEffect=t.isEffect),null!==t.vertical&&(I.data[l].vertical=t.vertical),null!==t.horizontal&&(I.data[l].horizontal=t.horizontal),null!==t.blur&&(I.data[l].blur=t.blur),null!==t.spread&&(I.data[l].spread=t.spread),null!==t.inset&&(I.data[l].inset=t.inset),null!==t.toggle&&(I.data[l].toggle=t.toggle),null!==t.gradients&&(I.data[l].gradients=t.gradients),null!==t.isEnable&&(I.data[l].isEnable=t.isEnable),null!==t.channelID&&(I.data[l].channelID=t.channelID),null!==t.apiKey&&(I.data[l].apiKey=t.apiKey),null!==t.rate&&(I.data[l].rate=t.rate),"image"===o.attribute&&(I.data[l].value=t.value),null!==t.isCustom&&(I.data[l].isCustom=t.isCustom||!1),null!==t.isDefault&&(I.data[l].isDefault=t.isDefault||!1),null!==t.isDefaultMin&&(I.data[l].isDefaultMin=t.isDefaultMin||!1),null!==t.isDefaultMax&&(I.data[l].isDefaultMax=t.isDefaultMax||!1),null!==t.defaultValue&&(I.data[l].defaultValue=t.defaultValue||"none"),null!==t.defaultValueMin&&(I.data[l].defaultValueMin=t.defaultValueMin||"none"),null!==t.defaultValueMax&&(I.data[l].defaultValueMax=t.defaultValueMax||"none"),null!==t.range&&(I.data[l].range=t.range||{min:0,max:0}))}},form:o,serviceFilterFn:async(e,a,t)=>{await F(),setTimeout((()=>{a((()=>{o.serviceOpt=l.value}))}),1e3)},cleanupStorage:()=>{localStorage.clear(),function(e,a,t){P.notify({progress:!0,message:t,color:a,timeout:4e3,position:e})}("top","teal",v.lg.message.cleanStorageSuccess),setTimeout((()=>{location.reload()}),5e3)},counter:u,adjustCounter:(e,a,t,l,o,s)=>{let n=Number(u.counter1),i=Number(u.target1),r=Number(u.counter2),c=Number(u.target2),d=Number(u.counter3),g=Number(u.target3);"increment"===l&&("current"===e?(1===o&&(u.counter1=Math.min(n+1,t)),2===o&&(u.counter2=Math.min(r+1,t)),3===o&&(u.counter3=Math.min(d+1,t))):(1===o&&(u.target1=Math.min(i+1,t),localStorage.setItem("counter-target1",u.target1)),2===o&&(u.target2=Math.min(c+1,t),localStorage.setItem("counter-target2",u.target2)),3===o&&(u.target3=Math.min(g+1,t),localStorage.setItem("counter-target3",u.target3)))),"decrement"===l&&("current"===e?(1===o&&(u.counter1=Math.max(n-1,a)),2===o&&(u.counter2=Math.max(r-1,a)),3===o&&(u.counter3=Math.max(d-1,a))):(1===o&&(u.target1=Math.max(i-1,a),localStorage.setItem("counter-target1",u.target1)),2===o&&(u.target2=Math.max(c-1,a),localStorage.setItem("counter-target2",u.target2)),3===o&&(u.target3=Math.max(g-1,a),localStorage.setItem("counter-target3",u.target3)))),"update"===l&&("current"===e?(1===o&&(u.counter1=n<a?a:n>t?t:n),2===o&&(u.counter2=r<a?a:r>t?t:r),3===o&&(u.counter3=d<a?a:d>t?t:d)):(1===o&&(u.target1=i<a?a:i>t?t:i,localStorage.setItem("counter-target1",u.target1)),2===o&&(u.target2=c<a?a:c>t?t:c,localStorage.setItem("counter-target2",u.target2)),3===o&&(u.target3=g<a?a:g>t?t:g,localStorage.setItem("counter-target3",u.target3)))),s&&A(s,e,o)},resetCounter:async e=>{const t={transmit:"reset-ohayou-counter",counter:e};try{const e=await fetch(`${a.baseURL}/api/plugins/${uid}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),{response:l}=await e.json()}catch(e){}},statusCounter:B,counterKeyWords1:r,counterKeyWords2:c,counterKeyWords3:d}}});app.use(Quasar,{config:{loading:!0,loadingBar:!0,notify:!0,copyToClipboard:!0}}),Quasar.IconSet.set(Quasar.IconSet.fontawesomeV6),app.mount("#app");